<!-- Checkpoint here. The code runs correctly -->
<!DOCTYPE html>
<html>
<head>
	<title>Tic Tak Toe</title>
	<!-- CSS only -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

	<style type="text/css">
		td{
			border : 4px solid black;
			width: 100px;
			height: 100px;
			font-size: 60px;
			text-align: center;
		}
		table{
			margin-right: auto;
			margin-left: auto;
			margin-bottom: 30px ;
		}
	</style>
</head>
<body>
	<!-- container begins -->
	<div class="container">
		<!-- jumbotron begins -->
		<div class="jumbotron">
			<!-- row begins -->
			<div class="row">
				<div class="col-12">
					<h1>Welcome to Tic Tak Toe!</h1>
					<h6>Rules</h6>
					<ol>
						<li>Enter X or O in the boxes.</li>
						<li>One with three continuous occurance wins!</li>
						<li>You can click the restart button, to start a new game at any moment.</li>
						<li>Time to have fun!!!</li>
					</ol>
					<!-- button begins -->
					<button class="btn btn-primary restart">Restart</button>
					<!-- button ends -->
				</div>
			</div>
			<!-- row ends -->
		</div>
		<!-- jumbotron ends -->
			<!-- table begins -->
			<table>
				<tr>
					<td id="one"></td>
					<td id="two"></td>
					<td id="three"></td>
				</tr>
				<tr>
					<td id="four"></td>
					<td id="five"></td>
					<td id="six"></td>
				</tr>
				<tr>
					<td id="seven"></td>
					<td id="eight"></td>
					<td id="nine"></td>
				</tr>
			</table>
			<!-- table ends -->
	</div>
	<!-- container ends -->

	<script>
	//	alert('Welcome to Tic-Tak-Toe game!!! Please enjoy the game!');
		// Selecting all the boxes
		var box = document.querySelectorAll('td');

		// accessing individual boxes

		var one = document.querySelector('#one');
		var two = document.querySelector('#two');
		var three = document.querySelector('#three');
		var four = document.querySelector('#four');
		var five = document.querySelector('#five');
		var six = document.querySelector('#six');
		var seven = document.querySelector('#seven');
		var eight = document.querySelector('#eight');
		var nine = document.querySelector('#nine');

		var check = 0;
		// Box text altering for X
		for (var i = 0; i < box.length; i++) {
    box[i].addEventListener('click', remark);
}
var previous ='';
var index = '';

		// Defining remark function
		function remark(){
			// new code begins
			if ( one.textContent ==='' && two.textContent ==='' && three.textContent ==='' && four.textContent ==='' && five.textContent ==='' && six.textContent ==='' && seven.textContent ==='' && eight.textContent ==='' && nine.textContent ===''){
				var sign = prompt("Enter \'X\' or \'O\':");
				if( sign ==='x' || sign === 'X') {
					this.textContent = 'X';
					previous = 'X';
					index = this.id;	

				}
				else if( sign === 'o' || sign === 'O') {
					this.textContent = 'O';
					previous = 'O';
					index = this.id;
				}
				else {
					alert('Invalid Entry!!! Enter \'X\' or \'O\' please!');
				}
			}
			else{
				if( this.textContent !== '' ){
					if( this.id === index ) {
						this.textContent = '';
						if( previous === 'X'){
							previous = 'O';
						}
						else if(previous === 'O'){
							previous = 'X';
						}
					}
				}
				else if( previous === 'X' ) {
					this.textContent = 'O';
					previous = 'O';
					index = this.id;
				}
				else if ( previous === 'O' ) {
					this.textContent = 'X';
					previous = 'X';
					index = this.id;
				}
			}
			

			// new code ends

			// declaring winner or draw
			// cases with 1 begins *******************************************

			//  1-2-3
			if (one.textContent === two.textContent && three.textContent === two.textContent && one.textContent !== '' ) { 
				alert( one.textContent + ' wins. Congratulations!!! Let\'s play a new match!!!');
				cleanit();
			} 
			// 1-4-7
			else if (one.textContent === four.textContent && seven.textContent === four.textContent && one.textContent !== '' ) { 
				alert( one.textContent + ' wins. Congratulations!!! Let\'s play a new match!!!');
				cleanit();
			} 
			// 1-5-9
			else if (one.textContent === five.textContent && nine.textContent === five.textContent && one.textContent !== '' ) { 
				alert( one.textContent + ' wins. Congratulations!!! Let\'s play a new match!!!');
				cleanit();
			} 

			// cases with 1 ends***************************************************

			// cases with 2 begins *****************************************************

			// 2-5-8        ( 2-1-3 already covered in cases with 1 )
			else if (two.textContent === five.textContent && eight.textContent === five.textContent && two.textContent !== '' ) { 
				alert( two.textContent + ' wins. Congratulations!!! Let\'s play a new match!!!');
				cleanit();
			} 
			// cases with 2 ends*******************************************

			// cases with 3 ***************************************************

			// 3-6-9
			else if (three.textContent === six.textContent && nine.textContent === six.textContent && three.textContent !== '' ) { 
				alert( three.textContent + ' wins. Congratulations!!! Let\'s play a new match!!!');
				cleanit();
			} 
			// 3-5-7  ( 3-2-1 already covered in cases with 1 )
			else if (three.textContent === five.textContent && three.textContent === seven.textContent && three.textContent !== '' ) { 
				alert( three.textContent + ' wins. Congratulations!!! Let\'s play a new match!!!');
				cleanit();
			} 
			// cases with 3 ends***************************************

			// cases with 4 begins*******************************************

			// 4-5-6  (4-1-7 already covered in cases with 1)
			else if (four.textContent === five.textContent && four.textContent === six.textContent && four.textContent !== '' ) { 
				alert( four.textContent + ' wins. Congratulations!!! Let\'s play a new match!!!');
				cleanit();
			}
			// cases with 4 ends*******************************************************
			// All cases of 5 are already covered
			// All cases of 6 are already covered

			// cases with 7*******************************************************************

			//7-8-9
			else if (seven.textContent === eight.textContent && seven.textContent === nine.textContent && seven.textContent !== '' ) { 
				alert( seven.textContent + ' wins. Congratulations!!! Let\'s play a new match!!!');
				cleanit();
			}
			// cases with 7 ends***************************************************************
			// All cases of 8 are already covered
			// All cases of 9 are already covered

			//declaring draw
			else if ( one.textContent !=='' && two.textContent !=='' && three.textContent !=='' && four.textContent !=='' && five.textContent !=='' && six.textContent !=='' && seven.textContent !=='' && eight.textContent !=='' && nine.textContent !=='') {
				alert( 'Match draw!!! Let\'s play a new match!!! ' );
					cleanit();
			}

		}

		// Restart button function
		var reset = document.querySelector('.restart');

		reset.addEventListener('click', cleanit );

		//function will reload current page. Hence clean the page
		function cleanit() {
			location.reload();
		}

	</script>
</body>
</html>